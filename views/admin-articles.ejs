<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin - Articles</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <h1>Admin - Articles Dashboard</h1>

    <% if (articles && articles.length > 0) { %>
        <table border="1" cellpadding="10">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Description</th>
                    <th>File</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <% articles.forEach(article => { %>
                    <tr>
                        <td><%= article.title %></td>
                        <td><%= article.author %></td>
                        <td><%= article.description %></td>
                        <td>
                            <a href="/uploads/<%= article.filename %>" target="_blank">View</a> |
                            <a href="/uploads/<%= article.filename %>" download>Download</a>
                        </td>
                        <td><%= article.isApproved ? "Approved" : "Pending" %></td>
                        <td>
                            <% if (!article.isApproved) { %>
                                <form action="/admin/articles/<%= article._id %>/approve" method="POST">
                                    <button type="submit">Approve</button>
                                </form>
                            <% } else { %>
                                Already Approved
                            <% } %>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <p>No articles found.</p>
    <% } %>

    <a href="/admin" class="btn">Back to Dashboard</a>
</body>
</html>
