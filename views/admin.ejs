<%- include('partials/header', { title: 'Admin Dashboard', active: 'admin' }) %>

<section class="admin-dashboard">
  <h1>Admin Dashboard</h1>

  <h2>Statistics</h2>
  <ul>
    <li>Total Users: <%= stats.users %></li>
    <li>Total Articles: <%= stats.articles %></li>
    <li>Total Certificates: <%= stats.certificates %></li>
    <li>Total Invoices: <%= stats.invoices %></li>
  </ul>

  <h2>Manage Users</h2>
  <ul>
    <% users.forEach(user => { %>
      <li><%= user.name %> - <%= user.email %> - <%= user.isAdmin ? 'Admin' : 'User' %></li>
    <% }) %>
  </ul>

  <h2>Manage Articles</h2>
  <ul>
    <% articles.forEach(article => { %>
      <li>
        <h3><%= article.title %> by <%= article.author %></h3>
        <a href="/uploads/<%= article.filename %>" target="_blank">View</a> |
        <a href="/uploads/<%= article.filename %>" download>Download</a>

        <% if (!article.isApproved) { %>
          <form method="POST" action="/admin/articles/<%= article._id %>/approve" style="display:inline;">
            <button type="submit">Approve</button>
          </form>
        <% } else { %>
          <span style="color: green;">âœ” Approved</span>
        <% } %>
      </li>
    <% }) %>
  </ul>

  <h2>Manage Certificates</h2>
  <ul>
    <% certificates.forEach(cert => { %>
      <li><%= cert.number %> - <%= cert.recipientName %></li>
    <% }) %>
  </ul>

  <br>
</section>

<%- include('partials/footer') %>
