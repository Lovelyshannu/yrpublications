<%- include('partials/header', { title: 'Admin Dashboard', active: 'admin' }) %>

<section class="admin-dashboard">
  <div class="admin-overlay"></div>
  <div class="admin-container">
    <h1>Admin Dashboard</h1>

    <div class="dashboard-grid">

      <!-- Stats Card -->
      <div class="card">
        <h2>Statistics</h2>
        <ul>
          <li><strong>Users:</strong> <%= stats.users %></li>
          <li><strong>Articles:</strong> <%= stats.articles %></li>
          <li><strong>Certificates:</strong> <%= stats.certificates %></li>
          <li><strong>Invoices:</strong> <%= stats.invoices %></li>
        </ul>
      </div>

      <!-- Users Card -->
      <div class="card">
        <h2>Manage Users</h2>
        <ul>
          <% users.forEach(user => { %>
            <li><%= user.name %> - <%= user.email %> - <%= user.isAdmin ? 'Admin' : 'User' %></li>
          <% }) %>
        </ul>
      </div>

      <!-- Articles Card -->
      <div class="card">
        <h2>Manage Articles</h2>
        <ul>
          <% articles.forEach(article => { %>
            <li>
              <h3><%= article.title %> by <%= article.author %></h3>
              <a href="/admin/download/<%= article.filename %>">Download</a>
              <% if (!article.isApproved) { %>
                <form method="POST" action="/admin/articles/<%= article._id %>/approve" style="display:inline;">
                  <button type="submit" class="approve-btn">Approve</button>
                </form>
              <% } else { %>
                <span class="approved">âœ” Approved</span>
              <% } %>
            </li>
          <% }) %>
        </ul>
      </div>

      <!-- Certificates Card -->
      <div class="card">
        <h2>Manage Certificates</h2>
        <ul>
          <% certificates.forEach(cert => { %>
            <li><%= cert.number %> - <%= cert.recipientName %></li>
          <% }) %>
        </ul>
      </div>

    </div>
  </div>
</section>

<%- include('partials/footer') %>
